<?php

return [

    /*
    |--------------------------------------------------------------------------
    | CORS Paths
    |--------------------------------------------------------------------------
    |
    | Пути, к которым применяется CORS. Добавлены API и OAuth-роуты.
    |
    */
    'paths' => [
        'api/*',
        'auth/*',
        'sanctum/csrf-cookie',
    ],

    /*
    |--------------------------------------------------------------------------
    | Allowed Methods
    |--------------------------------------------------------------------------
    */
    'allowed_methods' => ['*'],

    /*
    |--------------------------------------------------------------------------
    | Allowed Origins
    |--------------------------------------------------------------------------
    |
    | Используем переменную окружения CORS_ALLOWED_ORIGINS со списком
    | через запятую. Пример:
    | CORS_ALLOWED_ORIGINS=https://fishtrackpro.ru,https://www.fishtrackpro.ru,http://localhost:5173
    |
    */
   'allowed_origins' => array_filter(array_map('trim', explode(',', env('CORS_ALLOWED_ORIGINS',
        'https://api.fishtrackpro.ru,https://fishtrackpro.ru,https://www.fishtrackpro.ru,http://localhost:5173'
    )))),

    /*
    |--------------------------------------------------------------------------
    | Allowed Origins Patterns
    |--------------------------------------------------------------------------
    |
    | Если хотите разрешить все поддомены:
    | 'allowed_origins_patterns' => ['~^https://.*\.fishtrackpro\.ru$~'],
    |
    */
    'allowed_origins_patterns' => [
        // пример: '~^https://.*\.fishtrackpro\.ru$~'
    ],

    /*
    |--------------------------------------------------------------------------
    | Allowed Headers
    |--------------------------------------------------------------------------
    */
    'allowed_headers' => ['*'],

    /*
    |--------------------------------------------------------------------------
    | Exposed Headers
    |--------------------------------------------------------------------------
    |
    | Заголовки, доступные JS после CORS — добавим Authorization, если нужно.
    |
    */
    'exposed_headers' => ['Authorization'],

    /*
    |--------------------------------------------------------------------------
    | Max Age
    |--------------------------------------------------------------------------
    |
    | В секундах: как долго браузер может кэшировать preflight-ответ.
    |
    */
    'max_age' => 86400,

    /*
    |--------------------------------------------------------------------------
    | Supports Credentials
    |--------------------------------------------------------------------------
    |
    | true — разрешить cookie/Authorization при кросс-доменных запросах.
    | Для Bearer-токенов не обязательно, но включим на будущее.
    |
    */
    'supports_credentials' => true,

];
