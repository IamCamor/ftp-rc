{"version":3,"file":"AddCatchPage-CON3MFnB.js","sources":["../../src/pages/AddCatchPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { addCatch } from '../api';\n\nconst AddCatchPage: React.FC = () => {\n  const [form, setForm] = useState<any>({\n    species:'', length:'', weight:'',\n    style:'', lure:'', tackle:'', notes:'',\n    photo_url:'', lat:'', lng:'', caught_at:'', privacy:'all'\n  });\n  const [msg, setMsg] = useState('');\n\n  function set<K extends string>(k:K, v:any){ setForm((s:any)=> ({...s, [k]:v})); }\n\n  async function submit(e:React.FormEvent){\n    e.preventDefault(); setMsg('');\n    try{\n      const payload = {\n        ...form,\n        length: form.length? Number(form.length): undefined,\n        weight: form.weight? Number(form.weight): undefined,\n        lat: form.lat? Number(form.lat): undefined,\n        lng: form.lng? Number(form.lng): undefined,\n        caught_at: form.caught_at ? new Date(form.caught_at).toISOString() : undefined,\n      };\n      await addCatch(payload);\n      setMsg('Улов добавлен');\n    }catch(ex:any){ setMsg(ex?.message || 'Ошибка сохранения'); }\n  }\n\n  return (\n    <div className=\"container\">\n      <h2 className=\"h2\">Добавить улов</h2>\n      <form className=\"glass card grid\" onSubmit={submit}>\n        <input className=\"input\" placeholder=\"Вид рыбы\" value={form.species} onChange={e=>set('species', e.target.value)} />\n        <div className=\"row\" style={{gap:8}}>\n          <input className=\"input\" placeholder=\"Длина (см)\" value={form.length} onChange={e=>set('length', e.target.value)} />\n          <input className=\"input\" placeholder=\"Вес (кг)\" value={form.weight} onChange={e=>set('weight', e.target.value)} />\n        </div>\n        <div className=\"row\" style={{gap:8}}>\n          <input className=\"input\" placeholder=\"Стиль\" value={form.style} onChange={e=>set('style', e.target.value)} />\n          <input className=\"input\" placeholder=\"Приманка\" value={form.lure} onChange={e=>set('lure', e.target.value)} />\n          <input className=\"input\" placeholder=\"Снасти\" value={form.tackle} onChange={e=>set('tackle', e.target.value)} />\n        </div>\n        <textarea className=\"textarea\" placeholder=\"Заметки\" value={form.notes} onChange={e=>set('notes', e.target.value)} />\n        <input className=\"input\" placeholder=\"URL фото\" value={form.photo_url} onChange={e=>set('photo_url', e.target.value)} />\n\n        <div className=\"row\" style={{gap:8}}>\n          <input className=\"input\" placeholder=\"Широта\" value={form.lat} onChange={e=>set('lat', e.target.value)} />\n          <input className=\"input\" placeholder=\"Долгота\" value={form.lng} onChange={e=>set('lng', e.target.value)} />\n        </div>\n\n        <label className=\"muted\">Дата/время по местному времени (ISO будет сформирован автоматически)</label>\n        <input className=\"input\" type=\"datetime-local\" value={form.caught_at} onChange={e=>set('caught_at', e.target.value)} />\n\n        <select className=\"select\" value={form.privacy} onChange={e=>set('privacy', e.target.value)}>\n          <option value=\"all\">Все</option>\n          <option value=\"friends\">Друзья</option>\n          <option value=\"private\">Лично</option>\n        </select>\n\n        <button className=\"btn primary\" type=\"submit\">Сохранить</button>\n        {msg && <div className=\"muted\">{msg}</div>}\n      </form>\n    </div>\n  );\n};\nexport default AddCatchPage;\n"],"names":["AddCatchPage","form","setForm","useState","msg","setMsg","set","k","v","s","submit","payload","addCatch","ex","jsxs","jsx"],"mappings":"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"}