{"version":3,"file":"ProfilePage-Cd9gjgpM.js","sources":["../../src/pages/ProfilePage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport config from '../config';\nimport { profileMe, isAuthed, logout } from '../api';\nimport { Link, useNavigate } from 'react-router-dom';\nimport Icon from '../components/Icon';\n\ntype Me = {\n  id:number|string;\n  name?:string;\n  login?:string;\n  avatar?:string;\n  photoUrl?:string;\n  rating?:number;\n  email?:string;\n};\n\nexport default function ProfilePage(){\n  const [me, setMe] = useState<Me | null>(null);\n  const [authed, setAuthed] = useState<boolean>(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    (async () => {\n      const ok = await isAuthed();\n      setAuthed(!!ok);\n      if (ok) {\n        try { setMe(await profileMe()); } catch { setMe(null); }\n      }\n    })();\n  }, []);\n\n  const avatar = me?.photoUrl || me?.avatar || (config as any)?.assets?.defaultAvatar || '/assets/default-avatar.png';\n\n  if (!authed){\n    return (\n      <div style={{padding:16}}>\n        <div style={{\n          backdropFilter:'blur(10px)',\n          background:'rgba(255,255,255,0.35)',\n          border:'1px solid rgba(255,255,255,0.4)',\n          borderRadius:16, padding:16\n        }}>\n          <div style={{display:'flex',alignItems:'center',gap:8,marginBottom:8}}>\n            <Icon name=\"person\" />\n            <b>Профиль</b>\n          </div>\n          <div style={{marginBottom:12}}>Вы не авторизованы.</div>\n          <div style={{display:'flex',gap:8}}>\n            <Link to=\"/login\" style={{padding:'8px 12px',borderRadius:10,background:'#0ea5e9',color:'#fff',textDecoration:'none'}}>Войти</Link>\n            <Link to=\"/register\" style={{padding:'8px 12px',borderRadius:10,background:'#111827',color:'#fff',textDecoration:'none'}}>Регистрация</Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{padding:16, display:'grid', gap:12}}>\n      <div style={{\n        display:'flex', gap:12, alignItems:'center',\n        backdropFilter:'blur(10px)',\n        background:'rgba(255,255,255,0.35)',\n        border:'1px solid rgba(255,255,255,0.4)',\n        borderRadius:16, padding:16\n      }}>\n        <img src={avatar} alt=\"avatar\" style={{width:64,height:64,borderRadius:'50%',objectFit:'cover'}} />\n        <div>\n          <div style={{fontWeight:700}}>{me?.name || me?.login || 'Пользователь'}</div>\n          <div style={{fontSize:13,opacity:.8}}>{me?.email || ''}</div>\n          {!!me?.rating && <div style={{fontSize:13,marginTop:4}}><Icon name=\"star\" /> Рейтинг: {me.rating}</div>}\n        </div>\n      </div>\n\n      <div style={{\n        display:'flex', gap:8, flexWrap:'wrap'\n      }}>\n        <Link to=\"/profile/edit\" style={{padding:'8px 12px',borderRadius:10,background:'#f3f4f6',textDecoration:'none'}}>Настройки профиля</Link>\n        <Link to=\"/bonuses\" style={{padding:'8px 12px',borderRadius:10,background:'#f3f4f6',textDecoration:'none'}}>Бонусы</Link>\n        <Link to=\"/privacy\" style={{padding:'8px 12px',borderRadius:10,background:'#f3f4f6',textDecoration:'none'}}>Конфиденциальность</Link>\n      </div>\n\n      <button\n        onClick={async () => { try { await logout(); } catch {} navigate('/'); }}\n        style={{padding:'10px 14px',borderRadius:12,background:'#ef4444',color:'#fff',border:0,cursor:'pointer',width:'fit-content'}}\n      >\n        Выйти\n      </button>\n    </div>\n  );\n}\n"],"names":["ProfilePage","me","setMe","useState","authed","setAuthed","navigate","useNavigate","useEffect","ok","isAuthed","profileMe","avatar","config","jsxs","jsx","Icon","Link","logout"],"mappings":"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"}