import{r as u,j as a}from"./index-BY83b2EI.js";import{a as h}from"./api-DxtNjl_b.js";const d=()=>{const[t,c]=u.useState({species:"",length:"",weight:"",style:"",lure:"",tackle:"",notes:"",photo_url:"",lat:"",lng:"",caught_at:"",privacy:"all"}),[r,n]=u.useState("");function l(e,s){c(o=>({...o,[e]:s}))}async function i(e){e.preventDefault(),n("");try{const s={...t,length:t.length?Number(t.length):void 0,weight:t.weight?Number(t.weight):void 0,lat:t.lat?Number(t.lat):void 0,lng:t.lng?Number(t.lng):void 0,caught_at:t.caught_at?new Date(t.caught_at).toISOString():void 0};await h(s),n("Улов добавлен")}catch(s){n(s?.message||"Ошибка сохранения")}}return a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"h2",children:"Добавить улов"}),a.jsxs("form",{className:"glass card grid",onSubmit:i,children:[a.jsx("input",{className:"input",placeholder:"Вид рыбы",value:t.species,onChange:e=>l("species",e.target.value)}),a.jsxs("div",{className:"row",style:{gap:8},children:[a.jsx("input",{className:"input",placeholder:"Длина (см)",value:t.length,onChange:e=>l("length",e.target.value)}),a.jsx("input",{className:"input",placeholder:"Вес (кг)",value:t.weight,onChange:e=>l("weight",e.target.value)})]}),a.jsxs("div",{className:"row",style:{gap:8},children:[a.jsx("input",{className:"input",placeholder:"Стиль",value:t.style,onChange:e=>l("style",e.target.value)}),a.jsx("input",{className:"input",placeholder:"Приманка",value:t.lure,onChange:e=>l("lure",e.target.value)}),a.jsx("input",{className:"input",placeholder:"Снасти",value:t.tackle,onChange:e=>l("tackle",e.target.value)})]}),a.jsx("textarea",{className:"textarea",placeholder:"Заметки",value:t.notes,onChange:e=>l("notes",e.target.value)}),a.jsx("input",{className:"input",placeholder:"URL фото",value:t.photo_url,onChange:e=>l("photo_url",e.target.value)}),a.jsxs("div",{className:"row",style:{gap:8},children:[a.jsx("input",{className:"input",placeholder:"Широта",value:t.lat,onChange:e=>l("lat",e.target.value)}),a.jsx("input",{className:"input",placeholder:"Долгота",value:t.lng,onChange:e=>l("lng",e.target.value)})]}),a.jsx("label",{className:"muted",children:"Дата/время по местному времени (ISO будет сформирован автоматически)"}),a.jsx("input",{className:"input",type:"datetime-local",value:t.caught_at,onChange:e=>l("caught_at",e.target.value)}),a.jsxs("select",{className:"select",value:t.privacy,onChange:e=>l("privacy",e.target.value),children:[a.jsx("option",{value:"all",children:"Все"}),a.jsx("option",{value:"friends",children:"Друзья"}),a.jsx("option",{value:"private",children:"Лично"})]}),a.jsx("button",{className:"btn primary",type:"submit",children:"Сохранить"}),r&&a.jsx("div",{className:"muted",children:r})]})]})};export{d as default};
//# sourceMappingURL=AddCatchPage-CON3MFnB.js.map
