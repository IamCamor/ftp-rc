import{a as j,r as n,j as s,I as d,c as m}from"./index-Cex0JMuM.js";import{g as h,h as g}from"./api-DpD81C9e.js";const f=()=>{const{id:t}=j(),[a,c]=n.useState(null),[i,x]=n.useState(""),[l,o]=n.useState("");n.useEffect(()=>{t&&h(t).then(c).catch(e=>x(e.message||"Ошибка"))},[t]);async function u(e){e.preventDefault();try{await g(String(t),l),o("");const r=await h(String(t));c(r)}catch(r){alert(r?.message||"Не удалось добавить комментарий")}}return i?s.jsx("div",{className:"container",children:s.jsx("div",{className:"card glass",style:{color:"#ffb4b4"},children:i})}):a?s.jsxs("div",{className:"container",children:[s.jsxs("h2",{className:"h2",children:["Улов #",t]}),a.photo_url&&s.jsx("img",{src:a.photo_url,alt:"",style:{width:"100%",borderRadius:12}}),a.caption&&s.jsx("div",{style:{marginTop:8},children:a.caption}),s.jsxs("div",{className:"row",style:{gap:8,marginTop:10},children:[s.jsxs("button",{className:"btn",children:[s.jsx(d,{name:m.icons.like})," ",a.likes_count??0]}),s.jsxs("button",{className:"btn",children:[s.jsx(d,{name:m.icons.share})," Поделиться"]})]}),s.jsx("h3",{style:{marginTop:16},children:"Комментарии"}),s.jsx("div",{className:"grid",children:(a.comments||[]).map((e,r)=>s.jsxs("div",{className:"card glass",children:[s.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[s.jsx("strong",{children:e.user_name||"гость"}),s.jsx("span",{className:"muted",children:new Date(e.created_at||Date.now()).toLocaleString()})]}),s.jsx("div",{style:{marginTop:6},children:e.text})]},r))}),s.jsxs("form",{className:"card glass",style:{marginTop:12},onSubmit:u,children:[s.jsx("textarea",{className:"textarea",placeholder:"Ваш комментарий…",value:l,onChange:e=>o(e.target.value),required:!0}),s.jsx("button",{className:"btn primary",type:"submit",children:"Отправить"})]})]}):s.jsx("div",{className:"container",children:s.jsx("div",{className:"card glass",children:"Загрузка…"})})};export{f as default};
//# sourceMappingURL=CatchDetailPage-B7vESmws.js.map
